p8105_hw3_nl2835
================
Nancy Le
2023-10-08

``` r
library(tidyverse)
library(p8105.datasets)
library(ggridges)
data("instacart")
```

### Problem 1

The Instacart dataset has 1384617 observations and 15 variables, which
include `order_id`, `product_id`, the `user_id`, `product_name`s, and
which location of the supermarket the products were found (as in, the
`department` and `aisle`).

User IDs ranged from 1 to 206209.

``` r
num_aisles <- instacart |> 
  select(aisle) |> 
  distinct() |> 
  nrow()

print(num_aisles)
## [1] 134
```

There are 134 aisles.

``` r
count_items_aisle <- instacart |> 
 group_by(aisle_id) |> 
 count() |> 
  arrange(desc(n))
```

The aisle with the most items ordered from is 83.

``` r
instacart = instacart |> 
  group_by(aisle_id) |> 
  mutate(total_product_count = n()) |> 
  select(order_id, aisle_id, product_id, total_product_count, everything())
```

``` r
subset_instacart = instacart |> 
  filter(total_product_count > 10000)
```

``` r
subset_instacart |> 
  ggplot(aes(x = aisle_id, y = total_product_count)) + geom_point() + labs(
    title = "Number of Products Ordered by Aisle",
    x = "Aisle ID",
    y = "Number of Products Ordered",
    caption = "Data from Instacart") +
  scale_x_continuous(
    breaks = seq(0, 135, by = 1)
  )
```

![](p8105_hw3_nl2835_files/figure-gfm/scatterplot%20items%20by%20aisle-1.png)<!-- -->

``` r

#need to go back and fix aisle id labels - maybe should use text labels above just the top 3 product counts?
```

``` r
subset_instacart |> 
ggplot(aes(x = aisle_id, y = total_product_count)) + 
  geom_bar(stat = "identity") + 
  scale_x_discrete(labels = subset_instacart$aisle_id)
```

![](p8105_hw3_nl2835_files/figure-gfm/bar%20plot%20items%20by%20aisle-1.png)<!-- -->

``` r
three_depts = instacart |> 
  filter(aisle == c("baking ingredients", "dog food care", "packaged vegetables fruits")) |> 
  group_by(product_id, aisle_id) 
## Warning: There were 104 warnings in `filter()`.
## The first warning was:
## ℹ In argument: `aisle == c("baking ingredients", "dog food care", "packaged
##   vegetables fruits")`.
## ℹ In group 1: `aisle_id = 1`.
## Caused by warning in `aisle == c("baking ingredients", "dog food care", "packaged vegetables fruits")`:
## ! longer object length is not a multiple of shorter object length
## ℹ Run `dplyr::last_dplyr_warnings()` to see the 103 remaining warnings.
```

``` r
three_depts = three_depts |> 
  mutate(product_count = 1) |> 
  select(aisle_id, aisle, product_id, product_name, product_count, everything()) 
```

``` r
top_three = three_depts |> 
  group_by(aisle_id, product_name) |> 
  summarize(product_count = sum(product_count)) |> 
  arrange(desc(product_count))  |> 
  slice_head(n = 3) |> 
  select(product_name, product_count, aisle_id) 
```
